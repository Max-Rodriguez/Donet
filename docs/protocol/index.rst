.. _protocol:

The Donet Protocol
==================

.. toctree::
    :maxdepth: 2

    encapsulation
    client
    clientagent
    stateserver
    dbserver
    messagedirector
    eventlogger

Reference Tables
----------------

Control Messages
^^^^^^^^^^^^^^^^

+--------------------+------+--------------------------------------+
| Message            | ID   | Parameters                           |
+====================+======+======================================+
| ADD_CHANNEL        | 9000 | **uint64** channel                   |
+--------------------+------+--------------------------------------+
| REMOVE_CHANNEL     | 9001 | **uint64** channel                   |
+--------------------+------+--------------------------------------+
| ADD_RANGE          | 9002 | **uint64** low, **uint64** high      |
+--------------------+------+--------------------------------------+
| REMOVE_RANGE       | 9003 | **uint64** low, **uint64** high      |
+--------------------+------+--------------------------------------+
| ADD_POST_REMOVE    | 9010 | **blob** datagram                    |
+--------------------+------+--------------------------------------+
| CLEAR_POST_REMOVES | 9011 |                                      |
+--------------------+------+--------------------------------------+
| SET_CON_NAME       | 9012 | **string** name                      |
+--------------------+------+--------------------------------------+
| SET_CON_URL        | 9013 | **string** url                       |
+--------------------+------+--------------------------------------+
| LOG_MESSAGE        | 9014 | **blob** message                     |
+--------------------+------+--------------------------------------+

Client Messages
^^^^^^^^^^^^^^^

+-----------------------------------+------+----------------------------------------------------------------------------------------------------------------------------+
| Message                           | ID   | Parameters                                                                                                                 |
+===================================+======+============================================================================================================================+
| HELLO                             | 1    | **uint32** dc_hash, **string** version                                                                                     |
+-----------------------------------+------+----------------------------------------------------------------------------------------------------------------------------+
| HELLO_RESP                        | 2    |                                                                                                                            |
+-----------------------------------+------+----------------------------------------------------------------------------------------------------------------------------+
| DISCONNECT                        | 3    |                                                                                                                            |
+-----------------------------------+------+----------------------------------------------------------------------------------------------------------------------------+
| EJECT                             | 4    | **uint16** error_code, **string** reason                                                                                   |
+-----------------------------------+------+----------------------------------------------------------------------------------------------------------------------------+
| HEARTBEAT                         | 5    |                                                                                                                            |
+-----------------------------------+------+----------------------------------------------------------------------------------------------------------------------------+
| ENTER_OBJECT_REQUIRED             | 142  | **uint32** do_id, **uint32** parent_id, **uint32** zone_id, **uint16** dclass_id, ``<REQUIRED>``                           |
+-----------------------------------+------+----------------------------------------------------------------------------------------------------------------------------+
| ENTER_OBJECT_REQUIRED_OTHER       | 143  | **uint32** do_id, **uint32** parent_id, **uint32** zone_id, **uint16** dclass_id, ``<REQUIRED>``, ``<OTHER>``              |
+-----------------------------------+------+----------------------------------------------------------------------------------------------------------------------------+
| ENTER_OBJECT_REQUIRED_OWNER       | 172  | **uint32** do_id, **uint32** parent_id, **uint32** zone_id, **uint16** dclass_id, ``<REQUIRED>``                           |
+-----------------------------------+------+----------------------------------------------------------------------------------------------------------------------------+
| ENTER_OBJECT_REQUIRED_OTHER_OWNER | 173  | **uint32** do_id, **uint32** parent_id, **uint32** zone_id, **uint16** dclass_id, ``<REQUIRED>``, ``<OTHER>``              |
+-----------------------------------+------+----------------------------------------------------------------------------------------------------------------------------+
| OBJECT_SET_FIELD                  | 120  | **uint32** do_id, **uint16** field_id, ``<VALUE>``                                                                         |
+-----------------------------------+------+----------------------------------------------------------------------------------------------------------------------------+
| OBJECT_SET_FIELDS                 | 121  | **uint32** do_id, **uint16** field_count, [**uint16** field_id, ``<VALUE>``] * field_count                                 |
+-----------------------------------+------+----------------------------------------------------------------------------------------------------------------------------+
| OBJECT_LEAVING                    | 132  | **uint32** do_id                                                                                                           |
+-----------------------------------+------+----------------------------------------------------------------------------------------------------------------------------+
| OBJECT_LOCATION                   | 140  | **uint32** do_id, **uint32** parent_id, **uint32** zone_id                                                                 |
+-----------------------------------+------+----------------------------------------------------------------------------------------------------------------------------+
| ADD_INTEREST                      | 200  | **uint32** context, **uint16** interest_id, **uint32** parent_id, **uint32** zone_id                                       |
+-----------------------------------+------+----------------------------------------------------------------------------------------------------------------------------+
| ADD_INTEREST_MULTIPLE             | 201  | **uint32** context, **uint16** interest_id, **uint32** parent_id, **uint16** zone_count, [**uint32** zone_id] * zone_count |
+-----------------------------------+------+----------------------------------------------------------------------------------------------------------------------------+
| REMOVE_INTEREST                   | 203  | **uint32** context, **uint16** interest_id                                                                                 |
+-----------------------------------+------+----------------------------------------------------------------------------------------------------------------------------+
| DONE_INTEREST_RESP                | 204  | **uint32** context, **uint16** interest_id                                                                                 |
+-----------------------------------+------+----------------------------------------------------------------------------------------------------------------------------+

Client Agent Messages
^^^^^^^^^^^^^^^^^^^^^

State Server Messages
^^^^^^^^^^^^^^^^^^^^^

Distributed Object Accessor Messages
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Distributed Object Visibility Messages
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Parent Object Methods
^^^^^^^^^^^^^^^^^^^^^

DBSS Object Messages
^^^^^^^^^^^^^^^^^^^^

Database Object Messages
^^^^^^^^^^^^^^^^^^^^^^^^

